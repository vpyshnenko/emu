# ðŸ¦ Emu  
### *ÐŸÐµÑÐ¾Ñ‡Ð½Ð¸Ñ†Ð° ÑÐµÑ‚ÐµÐ²Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ñ… ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¾Ð²*

Emu â€” ÑÑ‚Ð¾ Ð»Ñ‘Ð³ÐºÐ¸Ð¹ Ñ€Ð°Ð½Ñ‚Ð°Ð¹Ð¼ Ð´Ð»Ñ Ð¿Ð¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ, ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ° **ÑÐµÑ‚ÐµÐ¹ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ñ… ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¾Ð² (AFSM)**.  
ÐžÐ½ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð¸ Ð²Ñ‹Ñ€Ð°Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±:

- Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒ **Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ** ÑƒÐ·Ð»Ð¾Ð²  
- ÑÐ¾ÐµÐ´Ð¸Ð½ÑÑ‚ÑŒ Ð¸Ñ… Ð² **ÐºÐ°ÑƒÐ·Ð°Ð»ÑŒÐ½ÑƒÑŽ ÑÐµÑ‚ÑŒ**  
- Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ñ **Ð´ÐµÑ‚ÐµÑ€Ð¼Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹Ð½Ñ‹Ð¼ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÐµÐ¼**

Emu â€” ÑÑ‚Ð¾ Ð½Ðµ ÑÐ¸Ð¼ÑƒÐ»ÑÑ‚Ð¾Ñ€.  
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑƒÐ·ÐµÐ» Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° **Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ðµ**, Ð° ÑÐ»Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ â€” **Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼Ñ‹Ð¹**.  
ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¾Ð±Ñ‰Ð°Ñ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ FIFO â€” Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð´Ð»Ñ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¸ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð².

---

## ðŸš§ ÐžÐ±Ð»Ð°ÑÑ‚ÑŒ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ: Ñ‚Ð¾Ð»ÑŒÐºÐ¾ AFSM

Emu ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ **Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ñ‹**:

- âœ” ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹Ð½Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ  
- âœ” Ð´ÐµÑ‚ÐµÑ€Ð¼Ð¸Ð½Ð¸Ð·Ð¼  
- âœ” ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ  
- âœ” ÑÐ²Ð½Ð°Ñ Ñ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð³Ð¸Ñ  
- âœ” ÐºÐ°ÑƒÐ·Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ  

Emu **Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚**:

- âœ˜ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ñ‹  
- âœ˜ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ñ‹ Ñ Ñ‚Ð°Ð¹Ð¼Ð¸Ð½Ð³Ð¾Ð¼  
- âœ˜ Ð½ÐµÐ´ÐµÑ‚ÐµÑ€Ð¼Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ñ‹  
- âœ˜ Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»Ð¸Ð·Ð¼ Ð¸ Ð¸Ð½Ñ‚ÐµÑ€Ð»Ð¸Ð²Ð¸Ð½Ð³  

Ð¢Ð°ÐºÐ¾Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð´ÐµÐ»Ð°ÐµÑ‚ Emu Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ð¼, Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·ÑƒÐµÐ¼Ñ‹Ð¼ Ð¸ ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¼ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°.

---

# ðŸ—ï¸ Emu ÐºÐ°Ðº Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð½Ñ‚Ð°Ð¹Ð¼

ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑƒÐ·ÐµÐ» Ð² Emu ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ **Ñ€ÐµÐ°Ð»ÑŒÐ½ÑƒÑŽ Ð´ÐµÑ‚ÐµÑ€Ð¼Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½ÑƒÑŽ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½ÑƒÑŽ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ**:

- ÑÑ‚ÐµÐº  
- Ð½Ð°Ð±Ð¾Ñ€ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹  
- Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ  
- ÑÑ‚Ñ€Ð¾Ð³Ð°Ñ ÑÐµÐ¼Ð°Ð½Ñ‚Ð¸ÐºÐ°  

Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð½Ðµ ÑÐ¸Ð¼ÑƒÐ»Ð¸Ñ€ÑƒÐµÑ‚ÑÑ â€” ÑÑ‚Ð¾ Ð¿Ð¾Ð»Ð½Ð¾Ñ†ÐµÐ½Ð½Ñ‹Ð¹ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼.

Ð•Ð´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ â€” **Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð¹**.  
ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ â€” Ð¾Ð±Ñ‰Ð°Ñ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ FIFO, Ð½Ð¾ ÐµÑ‘ Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð°:

- ÑˆÐ¸Ð½Ñƒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹  
- Ð°Ð¿Ð¿Ð°Ñ€Ð°Ñ‚Ð½Ñ‹Ðµ Ð¿Ñ€ÐµÑ€Ñ‹Ð²Ð°Ð½Ð¸Ñ  
- Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½ÑƒÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ  
- Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº  

Ð›Ð¾Ð³Ð¸ÐºÐ° ÑƒÐ·Ð»Ð¾Ð² Ð¸ VM Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ Ð½ÐµÐ¸Ð·Ð¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸.

---

# ðŸŽ“ ÐžÐ±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚

Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸Ñ Emu:

### **1 â€” Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ ÑÐµÑ‚ÑŒ**  
Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ñ Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸ Ð½Ð¸Ð¶Ðµ.

### **2 â€” Ð£Ð·Ð½Ð°Ð¹Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ ÑƒÐ·ÐµÐ»**  
Ð£Ð·ÐµÐ» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:
- Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ  
- Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ (Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ VM)  
- Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð¿Ð¾Ñ€Ñ‚Ñ‹  

### **3 â€” ÐŸÐ¾Ð¹Ð¼Ð¸Ñ‚Ðµ Ñ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð³Ð¸ÑŽ**  
Ð¡Ð²ÑÐ·Ð¸ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÑŽÑ‚, ÐºÐ°Ðº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ÑÑ Ð¼ÐµÐ¶Ð´Ñƒ ÑƒÐ·Ð»Ð°Ð¼Ð¸.

### **4 â€” Ð˜Ð·ÑƒÑ‡Ð¸Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ VM**  
ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð²Ñ€Ð¾Ð´Ðµ `Load`, `Add`, `Emit`, `Halt`.

### **5 â€” ÐŸÐ¾ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ ÑÐ²Ð¾ÑŽ Ð¼Ð¸Ð½Ð¸-ÑÐµÑ‚ÑŒ**  
ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ Ð´Ð²ÑƒÑ… ÑƒÐ·Ð»Ð¾Ð², Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‰Ð¸Ñ… Ñ‡Ð¸ÑÐ»Ð° Ð´Ñ€ÑƒÐ³ Ð´Ñ€ÑƒÐ³Ñƒ.

### **6 â€” Ð˜ÑÑÐ»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ**  
Ð¦Ð¸ÐºÐ»Ñ‹, ÑÑ‡Ñ‘Ñ‚Ñ‡Ð¸ÐºÐ¸, Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð°Ñ ÑÐ²ÑÐ·ÑŒ, ÐºÐ¾Ð½Ð²ÐµÐ¹ÐµÑ€Ñ‹.

---


## ðŸŒ€ ÐŸÑ€Ð¸Ð¼ÐµÑ€: Ð¡ÐµÑ‚ÑŒ Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸Ð· `test_fib_mod.ml` ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ ÑÐµÑ‚ÑŒ AFSM, Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÑŽÑ‰ÑƒÑŽ Ñ‡Ð¸ÑÐ»Ð° Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ.

![Fibonacci Network Diagram](images/fib_net.png)  
*Ð”Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð°: ÐºÐ°ÑƒÐ·Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ‚Ð¾Ðº Ð¼ÐµÐ¶Ð´Ñƒ ÑƒÐ·Ð»Ð°Ð¼Ð¸ A, B Ð¸ C Ð² Ð¼Ð¾Ð´ÑƒÐ»ÑŒÐ½Ð¾Ð¹ ÑÐµÑ‚Ð¸ Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸.*

Ð£Ð·Ð»Ñ‹ A Ð¸ B Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑŽÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ; ÑƒÐ·ÐµÐ» C Ð¿ÐµÑ€ÐµÑÑ‹Ð»Ð°ÐµÑ‚ Ð¸Ñ… Ð¸ Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ Ð²Ñ‹Ñ…Ð¾Ð´Ð½ÑƒÑŽ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ.

## ðŸ§© ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°

Ð­Ñ‚Ð° ÑÐµÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð¾Ð¸Ñ‚ Ð¸Ð· Ñ‚Ñ€Ñ‘Ñ… Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ñ… ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¾Ð², ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð¸Ð· ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐ¹ ÑÑ‚ÐµÐºÐ¾Ð²Ð¾Ð¹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ðµ Emu.

### **NodeA Ð¸ NodeB â€” ÑÑ‚ÐµÐºÐ¾Ð²Ñ‹Ðµ ÑÑƒÐ¼Ð¼Ð°Ñ‚Ð¾Ñ€Ñ‹ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ**

NodeA Ð¸ NodeB â€” ÑÑ‚Ð¾ **ÑÑ‚ÐµÐºÐ¾Ð²Ñ‹Ðµ AFSMâ€‘Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ñ‹**, Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑŽÑ‰Ð¸Ðµ Ñ‡Ð¸ÑÐ»Ð° Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°.  
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑƒÐ·ÐµÐ» Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ Ð´Ð²Ð° Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ñ… ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ:

- Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ñ‡Ð¸ÑÐ»Ð¾ Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸  
- Ð²ÐµÑ€Ñ…Ð½ÑŽÑŽ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñƒ (Ð¼Ð¾Ð´ÑƒÐ»ÑŒ)  

ÐšÐ¾Ð³Ð´Ð° Ð¾Ð´Ð¸Ð½ Ð¸Ð· ÑƒÐ·Ð»Ð¾Ð² Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ:

1. Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ Ð¾Ð¿ÐµÑ€Ð°Ð½Ð´Ñ‹ Ð¸Ð· ÑÑ‚ÐµÐºÐ°  
2. Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¼Ð¾Ð´ÑƒÐ»ÑŒÐ½Ð¾Ðµ ÑÐ»Ð¾Ð¶ÐµÐ½Ð¸Ðµ (`AddMod`)  
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ  
4. Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð»Ð¸Ð±Ð¾:
   - **Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ** Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð¼, Ð»Ð¸Ð±Ð¾  
   - **ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ**  

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÑƒÐ·ÐµÐ» **Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‘Ñ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ ÑÐ¾ÑÐµÐ´Ñƒ** Ñ‡ÐµÑ€ÐµÐ· NodeC.  
Ð’Ð¼ÐµÑÑ‚Ðµ A Ð¸ B Ð¾Ð±Ñ€Ð°Ð·ÑƒÑŽÑ‚ ÐºÐ°ÑƒÐ·Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ», Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ð¹ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ `ceil`.

### **NodeC â€” Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ Ð¸ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸**

NodeC Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ ÑÑƒÐ¼Ð¼Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼.  
ÐžÐ½ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ñ€Ð¾Ð»ÑŒ **Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°** Ð¸ Ð¸Ð¼ÐµÐµÑ‚ Ð´Ð²Ðµ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸:

1. **ÐŸÐµÑ€ÐµÑÑ‹Ð»ÐºÐ° ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹**  
   - ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¾Ñ‚ A Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ñ… B  
   - ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¾Ñ‚ B Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ñ… A  
   - Ð’Ñ‹Ð´Ð°Ñ‘Ñ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð¸Ñ€ÑƒÑŽÑ‰ÑƒÑŽ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ð¾Ñ€Ñ‚ `out`  

2. **ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ**  
   - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ ÑÑ‡Ñ‘Ñ‚Ñ‡Ð¸Ðº ÑˆÐ°Ð³Ð¾Ð², Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð²Ð°ÑŽÑ‰Ð¸Ð¹ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹  
   - ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð²ÑÑŽ ÑÐµÑ‚ÑŒ, ÐµÑÐ»Ð¸ A Ð¸Ð»Ð¸ B Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÑŽÑ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ  

NodeC Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð´Ð¸ÑÐ¿ÐµÑ‚Ñ‡ÐµÑ€Ð¾Ð¼ Ð¸ Ð¿Ñ€ÐµÐ´Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¼ Ð²ÑÐµÐ¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹.

### **Ð—Ð°Ð¿ÑƒÑÐº Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¹**

Ð’ÑÑ ÑÐµÑ‚ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹ **bangâ€‘ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ** Ð² **NodeB**, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ `1`.  
Ð¡ ÑÑ‚Ð¾Ð³Ð¾ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ð° ÐºÐ°ÑƒÐ·Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ» A â†’ C â†’ B â†’ C â†’ A Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¤Ð¸Ð±Ð¾Ð½Ð°Ñ‡Ñ‡Ð¸ Ð¿Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑŽ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°.


```ocaml
open OUnit2
open Instructions

let make_vm () =
  Vm.create ~stack_capacity:100 ~max_steps:100

let pp_list lst =
  "[" ^ (String.concat "; " (List.map string_of_int lst)) ^ "]"
  

(* ------------------------------------------------------------ *)
(* Test: Fibonacci network with AddMod                          *)
(* ------------------------------------------------------------ *)

let test_fibonacci_mod_network _ctx =
  let vm = make_vm () in
  let ceil = 21 in

  (* AddMod program *)
  let addmod_prog = [
    AddMod;
    EmitIfNonZero "overflow"; 
    Pop;
    EmitTo "default";
  ] in
  
  let forward_prog ch_out =
    [
      LogStack;
      HaltIfEq (1, 0);
      EmitTo "default";
      EmitTo ch_out;
      Pop;
      PushConst (-1);
      Add;
      LogStack;
    ]
  in

  (* ------------------------------------------------------------ *)
  (* Node A                                                       *)
  (* ------------------------------------------------------------ *)
  let bA = Builder.Node.create ~state:[0; ceil] ~vm in
  let inA = bA.add_handler addmod_prog in
  let outA = bA.add_out_port "default" in
  let outA_overflow = bA.add_out_port "overflow" in
  let nodeA = bA.finalize () in

  (* ------------------------------------------------------------ *)
  (* Node B                                                       *)
  (* ------------------------------------------------------------ *)
  let bB = Builder.Node.create ~state:[0; ceil] ~vm in
  let inB = bB.add_handler addmod_prog in
  let outB = bB.add_out_port "default" in
  let outB_overflow = bB.add_out_port "overflow" in
  let nodeB = bB.finalize () in

  (* ------------------------------------------------------------ *)
  (* Node C                                                       *)
  (* ------------------------------------------------------------ *)
  let limit = 10 in
  let bC = Builder.Node.create ~state:[limit] ~vm in

  let inC_ch1 = bC.add_handler (forward_prog "ch1_out") in
  let inC_ch2 = bC.add_handler (forward_prog "ch2_out") in
  let inC_overflow = bC.add_handler [Halt] in

  let outC = bC.add_out_port "default" in
  let outC_ch1 = bC.add_out_port "ch1_out" in
  let outC_ch2 = bC.add_out_port "ch2_out" in

  let nodeC = bC.finalize () in

  (* ------------------------------------------------------------ *)
  (* Build network using Builder.Net + DSL wiring operator        *)
  (* ------------------------------------------------------------ *)
  let nb, ( --> ) = Builder.Net.create () in

  let idA = nb.add_node nodeA in
  let idB = nb.add_node nodeB in
  let idC = nb.add_node nodeC in

  (* Wiring *)
  (idA, outA) --> (idC, inC_ch1);
  (idC, outC_ch1) --> (idB, inB);
  (idB, outB) --> (idC, inC_ch2);
  (idC, outC_ch2) --> (idA, inA);

  (* Overflow wiring *)
  (idB, outB_overflow) --> (idC, inC_overflow);
  (idA, outA_overflow) --> (idC, inC_overflow);

  let net = nb.finalize () in

  (* ------------------------------------------------------------ *)
  (* Run simulation                                               *)
  (* ------------------------------------------------------------ *)
  let init_snap = Runtime.create ~lifespan:30 net in

  let digest =
    Runtime.run
      ~bang:{ dst = idB; in_port_id = inB; payload = 1 }
      init_snap
  in

  let res_stream =
    Digest.node_out_stream_on_port ~node_id:idC ~out_port:outC digest
  in
  
  assert_equal [1; 1; 2; 3; 5; 8; 13] res_stream;

  Printf.printf "Total steps: %d\n" (Digest.total_steps digest.history);
  Printf.printf "NodeC emitted values: %s\n" (pp_list res_stream)


(* ------------------------------------------------------------ *)

let suite =
  "runtime tests" >::: [
    "test fibonacci modulo" >:: test_fibonacci_mod_network;
  ]

let () = run_test_tt_main suite
```
### Running this produces:

```ocaml
1 1 2 3 5 8 13
```
A Fibonacci sequence emerges from simple local rules and causal wiring.

# ðŸ“¦ Installation
sh
opam install emu
# ðŸ§ª Running the example
sh
dune exec test_fib_mod
# ðŸ“š License
MIT (or your license)

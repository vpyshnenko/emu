# üê¶ Emu  
### *–ü–µ—Å–æ—á–Ω–∏—Ü–∞ —Å–µ—Ç–µ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤*

Emu ‚Äî —ç—Ç–æ –ª—ë–≥–∫–∏–π —Ä–∞–Ω—Ç–∞–π–º –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ **—Å–µ—Ç–µ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ (AFSM)**.  
–û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±:

- –æ–ø–∏—Å—ã–≤–∞—Ç—å **–ª–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** —É–∑–ª–æ–≤  
- —Å–æ–µ–¥–∏–Ω—è—Ç—å –∏—Ö –≤ **–∫–∞—É–∑–∞–ª—å–Ω—É—é —Å–µ—Ç—å**  
- –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Å **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–±—ã—Ç–∏–π–Ω—ã–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º**

Emu ‚Äî —ç—Ç–æ –Ω–µ —Å–∏–º—É–ª—è—Ç–æ—Ä.  
–ö–∞–∂–¥—ã–π —É–∑–µ–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **—Ä–µ–∞–ª—å–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ**, –∞ —Å–ª–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äî **–∑–∞–º–µ–Ω—è–µ–º—ã–π**.  
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∞—è –æ—á–µ—Ä–µ–¥—å FIFO ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.

---

## üöß –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: —Ç–æ–ª—å–∫–æ AFSM

Emu —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã**:

- ‚úî —Å–æ–±—ã—Ç–∏–π–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ  
- ‚úî –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º  
- ‚úî –∫–æ–Ω–µ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ  
- ‚úî —è–≤–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è  
- ‚úî –∫–∞—É–∑–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ  

Emu **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç**:

- ‚úò —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã  
- ‚úò –∞–≤—Ç–æ–º–∞—Ç—ã —Å —Ç–∞–π–º–∏–Ω–≥–æ–º  
- ‚úò –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã  
- ‚úò –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –∏ –∏–Ω—Ç–µ—Ä–ª–∏–≤–∏–Ω–≥  

–¢–∞–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç Emu –ø—Ä–æ—Å—Ç—ã–º, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

---

# üèóÔ∏è Emu –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º

–ö–∞–∂–¥—ã–π —É–∑–µ–ª –≤ Emu —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ä–µ–∞–ª—å–Ω—É—é –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É**:

- —Å—Ç–µ–∫  
- –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π  
- –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ  
- —Å—Ç—Ä–æ–≥–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞  

–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –Ω–µ —Å–∏–º—É–ª–∏—Ä—É–µ—Ç—Å—è ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º.

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–º–µ–Ω—è–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî **—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —Å–ª–æ–π**.  
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –æ–±—â–∞—è –æ—á–µ—Ä–µ–¥—å FIFO, –Ω–æ –µ—ë –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞:

- —à–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏–π  
- –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è  
- —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É  
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫  

–õ–æ–≥–∏–∫–∞ —É–∑–ª–æ–≤ –∏ VM –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏.

---

# üéì –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø—É—Ç—å –∏–∑—É—á–µ–Ω–∏—è Emu:

### **1 ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–µ—Ç—å**  
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Å –§–∏–±–æ–Ω–∞—á—á–∏ –Ω–∏–∂–µ.

### **2 ‚Äî –£–∑–Ω–∞–π—Ç–µ, —á—Ç–æ —Ç–∞–∫–æ–µ —É–∑–µ–ª**  
–£–∑–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ  
- –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–ø—Ä–æ–≥—Ä–∞–º–º—ã VM)  
- –≤—ã—Ö–æ–¥–Ω—ã–µ –ø–æ—Ä—Ç—ã  

### **3 ‚Äî –ü–æ–π–º–∏—Ç–µ —Ç–æ–ø–æ–ª–æ–≥–∏—é**  
–°–≤—è–∑–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫ —Å–æ–±—ã—Ç–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –º–µ–∂–¥—É —É–∑–ª–∞–º–∏.

### **4 ‚Äî –ò–∑—É—á–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ VM**  
–ö–æ–º–∞–Ω–¥—ã –≤—Ä–æ–¥–µ `Load`, `Add`, `Emit`, `Halt`.

### **5 ‚Äî –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ—é –º–∏–Ω–∏-—Å–µ—Ç—å**  
–ù–∞—á–Ω–∏—Ç–µ —Å –¥–≤—É—Ö —É–∑–ª–æ–≤, –ø–µ—Ä–µ–¥–∞—é—â–∏—Ö —á–∏—Å–ª–∞ –¥—Ä—É–≥ –¥—Ä—É–≥—É.

### **6 ‚Äî –ò—Å—Å–ª–µ–¥—É–π—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**  
–¶–∏–∫–ª—ã, —Å—á—ë—Ç—á–∏–∫–∏, –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, –∫–æ–Ω–≤–µ–π–µ—Ä—ã.

---

## üß© –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞

–≠—Ç–∞ —Å–µ—Ç—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–µ–∫–æ–≤–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ Emu.

### **NodeA –∏ NodeB ‚Äî —Å—Ç–µ–∫–æ–≤—ã–µ —Å—É–º–º–∞—Ç–æ—Ä—ã –ø–æ –º–æ–¥—É–ª—é**

NodeA –∏ NodeB ‚Äî —ç—Ç–æ **—Å—Ç–µ–∫–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã**, –≤—ã—á–∏—Å–ª—è—é—â–∏–µ —á–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏ –ø–æ –º–æ–¥—É–ª—é.  
–ö–∞–∂–¥—ã–π —É–∑–µ–ª —Ö—Ä–∞–Ω–∏—Ç –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è:

- —Ç–µ–∫—É—â–µ–µ —á–∏—Å–ª–æ –§–∏–±–æ–Ω–∞—á—á–∏  
- –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É (–º–æ–¥—É–ª—å)

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è:

1. VM –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ–ø–µ—Ä–∞–Ω–¥—ã –∏–∑ —Å—Ç–µ–∫–∞  
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–æ–∂–µ–Ω–∏–µ –ø–æ –º–æ–¥—É–ª—é (`AddMod`)  
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ  
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   - –æ–±—ã—á–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º, –∏–ª–∏  
   - —Å–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è  

–ü–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–π —É–∑–µ–ª **–ø–µ—Ä–µ–¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Å–µ–¥—É** —á–µ—Ä–µ–∑ NodeC.  
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, A –∏ B –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –§–∏–±–æ–Ω–∞—á—á–∏ –ø–æ –º–æ–¥—É–ª—é.

### **NodeC ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

NodeC ‚Äî –Ω–µ —Å—É–º–º–∞—Ç–æ—Ä.  
–û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π**  
   - –ü–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç A –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö B  
   - –ü–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç B –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö A  
   - –í—ã–≤–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç `out`

2. **–ö–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è**  
   - –ò–º–µ–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—á—ë—Ç—á–∏–∫ —à–∞–≥–æ–≤  
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤ A –∏–ª–∏ B

NodeC ‚Äî —ç—Ç–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∏ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å —Å–µ—Ç–∏.

### **–ó–∞–ø—É—Å–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π**

–°–µ—Ç—å –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è **—Å–æ–±—ã—Ç–∏–µ–º bang**, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –≤ **NodeB**, —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `1`.  
–î–∞–ª–µ–µ —Ü–∏–∫–ª A ‚Üí C ‚Üí B ‚Üí C ‚Üí A –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –§–∏–±–æ–Ω–∞—á—á–∏ –ø–æ –º–æ–¥—É–ª—é.

---

## üåÄ –ü—Ä–∏–º–µ—Ä: –°–µ—Ç—å –§–∏–±–æ–Ω–∞—á—á–∏ –ø–æ –º–æ–¥—É–ª—é

–ü—Ä–∏–º–µ—Ä –∏–∑ `test_fib_mod.ml` —Å—Ç—Ä–æ–∏—Ç —Å–µ—Ç—å AFSM, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â—É—é —á–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏ –ø–æ –º–æ–¥—É–ª—é.

![Fibonacci Network Diagram](docs/images/fib_net.png)  
*–î–∏–∞–≥—Ä–∞–º–º–∞: –∫–∞—É–∑–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ A, B –∏ C –≤ –º–æ–¥—É–ª—å–Ω–æ–π —Å–µ—Ç–∏ –§–∏–±–æ–Ω–∞—á—á–∏.*

```ocaml
... (–æ—Å—Ç–∞–≤—å—Ç–µ –∑–¥–µ—Å—å –≤–µ—Å—å –∫–æ–¥ –∏–∑ test_fib_mod.ml –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
